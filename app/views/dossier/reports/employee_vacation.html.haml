= render :partial => "dossier/reports/report_header", :locals => { :report => @report }

= render_options(@report)

%table.table.table-condensed.table-hover.report

  %thead
    %tr
      - @report.results.headers.each do |header|
        %th= @report.format_header(header)
  %tbody
    - vac_days_ytd_sum = 0
    - vac_pay_sum = 0
    - vac_days_period_sum = 0

    - @report.results.body.each do |row|
      - vac_days_ytd_sum += row[2].to_f
      -# eliminate spaces from formatted value to sum
      - pay_val = row[3]
      - vac_pay_sum += pay_val.tr(' ', '').to_f unless pay_val.nil?
      - vac_days_period_sum += row[4].to_f
      %tr
        - row.each do |value|
          %td= value
    %tr
      %th &nbsp;
      %th &nbsp;
      %th= number_with_precision(vac_days_ytd_sum, precision: 2, delimiter: ",")
      %th= number_to_currency(vac_pay_sum, locale: :cm)
      %th= number_with_precision(vac_days_period_sum, precision: 2, delimiter: ",")
      %th &nbsp;

  - if @report.results.footers.any?
    %tfoot
      - @report.results.footers.each do |row|
        %tr
          - row.each do |value|
            %th= value
